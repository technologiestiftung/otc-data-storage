# Migration `20200603152336-lowercase-fields`

This migration has been generated by fabianmoronzirfas at 6/3/2020, 3:23:36 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Detection" (
"accuracy" REAL NOT NULL  ,"counterId" INTEGER NOT NULL  ,"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP ,"detectedAt" DATE NOT NULL  ,"detectionTypeId" INTEGER NOT NULL  ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"x" REAL NOT NULL  ,"y" REAL NOT NULL  ,FOREIGN KEY ("counterId") REFERENCES "Counter"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("detectionTypeId") REFERENCES "DetectionType"("id") ON DELETE CASCADE ON UPDATE CASCADE)

INSERT INTO "quaint"."new_Detection" ("accuracy", "counterId", "createdAt", "detectedAt", "id", "x", "y") SELECT "accuracy", "counterId", "createdAt", "detectedAt", "id", "x", "y" FROM "quaint"."Detection"

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."Detection";;
PRAGMA foreign_keys=on

ALTER TABLE "quaint"."new_Detection" RENAME TO "Detection";

CREATE TABLE "quaint"."new_Trajectory" (
"cameraId" INTEGER NOT NULL  ,"detectionTypeId" INTEGER NOT NULL  ,"end" DATE NOT NULL  ,"geom" TEXT NOT NULL  ,"id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,"start" DATE NOT NULL  ,"trajectory" TEXT NOT NULL  ,FOREIGN KEY ("cameraId") REFERENCES "Camera"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("detectionTypeId") REFERENCES "DetectionType"("id") ON DELETE CASCADE ON UPDATE CASCADE)

INSERT INTO "quaint"."new_Trajectory" ("cameraId", "end", "geom", "id", "start", "trajectory") SELECT "cameraId", "end", "geom", "id", "start", "trajectory" FROM "quaint"."Trajectory"

PRAGMA foreign_keys=off;
DROP TABLE "quaint"."Trajectory";;
PRAGMA foreign_keys=on

ALTER TABLE "quaint"."new_Trajectory" RENAME TO "Trajectory";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200603113522-rename-collections..20200603152336-lowercase-fields
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url      = "file:./dev.db"
 }
 generator client {
   provider = "prisma-client-js"
@@ -14,9 +14,9 @@
   id                   Int                  @default(autoincrement()) @id
   createdAt            DateTime             @default(now())
   active               Boolean
   name                 String
-  location              String
+  location             String
   transformationMatrix String?
   owner                String?
   timezone             Int
   software             String?
@@ -25,12 +25,12 @@
   // Geometry(Point, 4326)
   geom                 String?
   // Geometry(Line, 4326)
   angle                String?
-  counters              Counter[]
-  trajectories           Trajectory[]
-  weathers              Weather[]
-  lightningConditions   LightningCondition[]
+  counters             Counter[]
+  trajectories         Trajectory[]
+  weathers             Weather[]
+  lightningConditions  LightningCondition[]
 }
 model Counter {
   id        Int      @default(autoincrement()) @id
@@ -49,30 +49,30 @@
   // Geometry(Line, 4326)
   line      String
   // Geometry(Line, 4326)
   direction String
-  Detection Detection[]
+  detection Detection[]
 }
 model Detection {
-  id         Int           @default(autoincrement()) @id
-  createdAt  DateTime      @default(now())
-  detectedAt DateTime
-  counter    Counter       @relation(fields: [counterId], references: [id])
-  counterId  Int
-  type       DetectionType @relation(fields: [typeId], references: [id])
-  typeId     Int
-  accuracy   Float
-  x          Float
-  y          Float
+  id              Int           @default(autoincrement()) @id
+  createdAt       DateTime      @default(now())
+  detectedAt      DateTime
+  counter         Counter       @relation(fields: [counterId], references: [id])
+  counterId       Int
+  detectionType   DetectionType @relation(fields: [detectionTypeId], references: [id])
+  detectionTypeId Int
+  accuracy        Float
+  x               Float
+  y               Float
 }
 model DetectionType {
   id          Int          @default(autoincrement()) @id
   label       String
   description String?
-  Detection   Detection[]
-  Trajectory  Trajectory[]
+  detection   Detection[]
+  trajectory  Trajectory[]
 }
 model Trajectory {
   id         Int    @default(autoincrement()) @id
@@ -81,13 +81,13 @@
   // Geometry(LineStringM, CUSTOM_ID)
   trajectory String
   // Geometry(LineStringM, 4326)
-  geom   String
-  type   DetectionType @relation(fields: [typeId], references: [id])
-  typeId Int
-  start  DateTime
-  end    DateTime
+  geom            String
+  detectionType   DetectionType @relation(fields: [detectionTypeId], references: [id])
+  detectionTypeId Int
+  start           DateTime
+  end             DateTime
 }
 model Weather {
   id            Int      @default(autoincrement()) @id
```
